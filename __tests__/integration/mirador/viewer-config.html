<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
    <title>Mirador - Table of contents</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">
  </head>
  <body>
    <div id="mirador" style="position: absolute; top: 0; bottom: 0; left: 0; right: 0;"></div>
    <script type="module">
      import Mirador from '../../../src';
      // import config from './mirador-configs/initial-viewer-config.js';
      const xywh = '9554.0,8213.0,1000,1000';

      const spl = xywh.split(',');

      // Box to zoom to
      const boxToZoom = {
        height: Number(spl[3]),
        width: Number(spl[2]),
        x: Number(spl[0]),
        y: Number(spl[1])
      };

      const zoomCenter = {
        x: boxToZoom.x + boxToZoom.width / 2,
        y: boxToZoom.y + boxToZoom.height / 2
      };

      const config = {
        id: 'mirador',
        windows: [{
          canvasId: "https://iiif.dl.itc.u-tokyo.ac.jp/repo/iiif/187cc82d-11e6-9912-9dd4-b4cca9b10970/canvas/p2",
          initialViewerConfig: {
            rotation: 180,
            x: zoomCenter.x,
            y: zoomCenter.y,
            zoom: 1 / Math.max(boxToZoom.width, boxToZoom.height) 
          },
          // manifestId: 'https://purl.stanford.edu/sn904cj3429/iiif/manifest',
          manifestId: "https://iiif.dl.itc.u-tokyo.ac.jp/repo/iiif/187cc82d-11e6-9912-9dd4-b4cca9b10970/manifest",
        }],
      };
      Mirador.viewer(config);
    </script>
  </body>
</html>
